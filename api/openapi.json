{
    "openapi": "3.0.0",
    "info": {
        "description": "API pour la gestion des BAES",
        "title": "BAES API",
        "version": "1.0"
    },
    "servers": [
        {
            "url": "http://localhost:5000",
            "description": "Local Flask server"
        }
    ],
    "paths": {
        "/auth/login": {
            "post": {
                "description": "Connexion de l'utilisateur via JSON. Fournissez \"login\" et \"password\" dans le corps de la requête.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "login": {
                                        "example": "monlogin",
                                        "type": "string"
                                    },
                                    "password": {
                                        "example": "monmotdepasse",
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "login",
                                    "password"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Utilisateur connecté avec succès",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "global_roles": {
                                            "description": "Rôles globaux de l'utilisateur (non liés à un site spécifique)",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "example": "super_admin",
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        },
                                        "message": {
                                            "example": "Connecté",
                                            "type": "string"
                                        },
                                        "sites": {
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "example": 3,
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "example": "Site A",
                                                        "type": "string"
                                                    },
                                                    "roles": {
                                                        "items": {
                                                            "properties": {
                                                                "id": {
                                                                    "example": 2,
                                                                    "type": "integer"
                                                                },
                                                                "name": {
                                                                    "example": "admin",
                                                                    "type": "string"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "type": "array"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        },
                                        "token": {
                                            "description": "JWT token d'authentification",
                                            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                                            "type": "string"
                                        },
                                        "user_id": {
                                            "example": 1,
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "example": "Identifiants invalides",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Authentication"
                ]
            }
        },
        "/auth/logout": {
            "get": {
                "description": "Déconnecte l'utilisateur connecté.",
                "responses": {
                    "200": {
                        "description": "Utilisateur déconnecté avec succès",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Déconnecté",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Authentication"
                ]
            },
            "post": {
                "description": "Déconnecte l'utilisateur connecté.",
                "responses": {
                    "200": {
                        "description": "Utilisateur déconnecté avec succès",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Déconnecté",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Authentication"
                ]
            }
        },
        "/baes/": {
            "get": {
                "description": "Récupère la liste de tous les BAES.",
                "responses": {
                    "200": {
                        "description": "Liste des BAES.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "etage_id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "label": {
                                                "example": "Étiquette BAES 1",
                                                "type": "string"
                                            },
                                            "name": {
                                                "example": "BAES 1",
                                                "type": "string"
                                            },
                                            "position": {
                                                "example": {
                                                    "x": 100,
                                                    "y": 200
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "BAES CRUD"
                ]
            },
            "post": {
                "description": "Crée un nouveau BAES.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "etage_id": {
                                        "example": 1,
                                        "type": "integer"
                                    },
                                    "label": {
                                        "example": "Étiquette BAES 1",
                                        "type": "string"
                                    },
                                    "name": {
                                        "example": "BAES 1",
                                        "type": "string"
                                    },
                                    "position": {
                                        "example": {
                                            "x": 100,
                                            "y": 200
                                        },
                                        "type": "object"
                                    }
                                },
                                "required": [
                                    "name",
                                    "position",
                                    "etage_id"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "BAES créé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "etage_id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "label": {
                                            "example": "Étiquette BAES 1",
                                            "type": "string"
                                        },
                                        "name": {
                                            "example": "BAES 1",
                                            "type": "string"
                                        },
                                        "position": {
                                            "example": {
                                                "x": 100,
                                                "y": 200
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    }
                },
                "tags": [
                    "BAES CRUD"
                ]
            }
        },
        "/baes/user/{user_id}": {
            "get": {
                "description": "Récupère le dernier status de chaque BAES visible par un utilisateur et chaque BAES non attribué à un étage.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des BAES avec leur dernier status.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "etage_id": {
                                                "example": 1,
                                                "nullable": true,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "label": {
                                                "example": "Étiquette BAES 1",
                                                "type": "string"
                                            },
                                            "latest_status": {
                                                "nullable": true,
                                                "properties": {
                                                    "erreur": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "id": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "is_ignored": {
                                                        "example": false,
                                                        "type": "boolean"
                                                    },
                                                    "is_solved": {
                                                        "example": false,
                                                        "type": "boolean"
                                                    },
                                                    "temperature": {
                                                        "example": 25.5,
                                                        "format": "float",
                                                        "nullable": true,
                                                        "type": "number"
                                                    },
                                                    "timestamp": {
                                                        "example": "2023-01-01T12:00:00Z",
                                                        "format": "date-time",
                                                        "type": "string"
                                                    },
                                                    "vibration": {
                                                        "example": true,
                                                        "nullable": true,
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "name": {
                                                "example": "BAES 1",
                                                "type": "string"
                                            },
                                            "position": {
                                                "example": {
                                                    "x": 100,
                                                    "y": 200
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "summary": "Récupère le dernier status de chaque BAES visible par un utilisateur et chaque BAES non attribué à un étage.",
                "tags": [
                    "BAES Operations"
                ]
            }
        },
        "/baes/without-etage": {
            "get": {
                "description": "Récupère la liste de tous les BAES qui n'ont pas d'étage assigné (etage_id = null).",
                "responses": {
                    "200": {
                        "description": "Liste des BAES sans étage.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "etage_id": {
                                                "example": null,
                                                "nullable": true
                                            },
                                            "id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "label": {
                                                "example": "Étiquette BAES 1",
                                                "type": "string"
                                            },
                                            "name": {
                                                "example": "BAES 1",
                                                "type": "string"
                                            },
                                            "position": {
                                                "example": {
                                                    "x": 100,
                                                    "y": 200
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "BAES CRUD"
                ]
            }
        },
        "/baes/{baes_id}": {
            "delete": {
                "description": "Supprime un BAES par son ID.",
                "parameters": [
                    {
                        "description": "ID du BAES à supprimer",
                        "in": "path",
                        "name": "baes_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "BAES supprimé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "BAES supprimé avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "BAES non trouvé."
                    }
                },
                "tags": [
                    "BAES CRUD"
                ]
            },
            "get": {
                "description": "Récupère un BAES par son ID.",
                "parameters": [
                    {
                        "description": "ID du BAES à récupérer",
                        "in": "path",
                        "name": "baes_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du BAES.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "etage_id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "label": {
                                            "example": "Étiquette BAES 1",
                                            "type": "string"
                                        },
                                        "name": {
                                            "example": "BAES 1",
                                            "type": "string"
                                        },
                                        "position": {
                                            "example": {
                                                "x": 100,
                                                "y": 200
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "BAES non trouvé."
                    }
                },
                "tags": [
                    "BAES CRUD"
                ]
            },
            "put": {
                "description": "Met à jour un BAES existant par son ID.",
                "parameters": [
                    {
                        "description": "ID du BAES à mettre à jour",
                        "in": "path",
                        "name": "baes_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "etage_id": {
                                        "example": 2,
                                        "type": "integer"
                                    },
                                    "label": {
                                        "example": "Étiquette BAES mise à jour",
                                        "type": "string"
                                    },
                                    "name": {
                                        "example": "BAES mis à jour",
                                        "type": "string"
                                    },
                                    "position": {
                                        "example": {
                                            "x": 150,
                                            "y": 250
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "BAES mis à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "etage_id": {
                                            "example": 2,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "label": {
                                            "example": "Étiquette BAES mise à jour",
                                            "type": "string"
                                        },
                                        "name": {
                                            "example": "BAES mis à jour",
                                            "type": "string"
                                        },
                                        "position": {
                                            "example": {
                                                "x": 150,
                                                "y": 250
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "BAES non trouvé."
                    }
                },
                "tags": [
                    "BAES CRUD"
                ]
            }
        },
        "/batiments/": {
            "get": {
                "description": "Récupère la liste de tous les bâtiments.",
                "responses": {
                    "200": {
                        "description": "Liste des bâtiments.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "name": {
                                                "example": "Batiment 1",
                                                "type": "string"
                                            },
                                            "polygon_points": {
                                                "type": "object"
                                            },
                                            "site_id": {
                                                "example": 1,
                                                "type": "integer"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Batiment CRUD"
                ]
            },
            "post": {
                "description": "Crée un nouveau bâtiment.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "example": "Batiment 1",
                                        "type": "string"
                                    },
                                    "polygon_points": {
                                        "example": {
                                            "points": [
                                                [
                                                    0,
                                                    0
                                                ],
                                                [
                                                    1,
                                                    1
                                                ]
                                            ]
                                        },
                                        "type": "object"
                                    },
                                    "site_id": {
                                        "example": 1,
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "name"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Bâtiment créé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Batiment 1",
                                            "type": "string"
                                        },
                                        "polygon_points": {
                                            "type": "object"
                                        },
                                        "site_id": {
                                            "example": 1,
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    }
                },
                "tags": [
                    "Batiment CRUD"
                ]
            }
        },
        "/batiments/{batiment_id}": {
            "delete": {
                "description": "Supprime un bâtiment par son ID.",
                "parameters": [
                    {
                        "description": "ID du bâtiment à supprimer",
                        "in": "path",
                        "name": "batiment_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Bâtiment supprimé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Bâtiment supprimé avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Bâtiment non trouvé."
                    }
                },
                "tags": [
                    "Batiment CRUD"
                ]
            },
            "get": {
                "description": "Récupère un bâtiment par son ID.",
                "parameters": [
                    {
                        "description": "ID du bâtiment à récupérer",
                        "in": "path",
                        "name": "batiment_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du bâtiment.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Batiment 1",
                                            "type": "string"
                                        },
                                        "polygon_points": {
                                            "type": "object"
                                        },
                                        "site_id": {
                                            "example": 1,
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Bâtiment non trouvé."
                    }
                },
                "tags": [
                    "Batiment CRUD"
                ]
            },
            "put": {
                "description": "Met à jour un bâtiment existant par son ID.",
                "parameters": [
                    {
                        "description": "ID du bâtiment à mettre à jour",
                        "in": "path",
                        "name": "batiment_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "example": "Batiment mis à jour",
                                        "type": "string"
                                    },
                                    "polygon_points": {
                                        "example": {
                                            "points": [
                                                [
                                                    1,
                                                    1
                                                ],
                                                [
                                                    2,
                                                    2
                                                ]
                                            ]
                                        },
                                        "type": "object"
                                    },
                                    "site_id": {
                                        "example": 2,
                                        "type": "integer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Bâtiment mis à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Batiment mis à jour",
                                            "type": "string"
                                        },
                                        "polygon_points": {
                                            "type": "object"
                                        },
                                        "site_id": {
                                            "example": 2,
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Bâtiment non trouvé."
                    }
                },
                "tags": [
                    "Batiment CRUD"
                ]
            }
        },
        "/batiments/{batiment_id}/floors": {
            "get": {
                "description": "Récupère tous les étages d'un bâtiment par son ID.",
                "parameters": [
                    {
                        "description": "ID du bâtiment dont on veut récupérer les étages",
                        "in": "path",
                        "name": "batiment_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des étages du bâtiment.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "batiment_id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "name": {
                                                "example": "Etage 1",
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Bâtiment non trouvé."
                    }
                },
                "tags": [
                    "Batiment CRUD"
                ]
            }
        },
        "/cartes/carte/{carte_id}": {
            "get": {
                "description": "Retourne le fichier image uploadé à partir de l'id de la carte",
                "parameters": [
                    {
                        "description": "ID de la carte dont on veut récupérer l'image.",
                        "in": "path",
                        "name": "carte_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Fichier image renvoyé avec succès."
                    },
                    "404": {
                        "description": "Fichier non trouvé."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            },
            "put": {
                "description": "Met à jour une carte existante avec de nouveaux paramètres. Vous pouvez mettre à jour l'image, les coordonnées du centre, le zoom, et l'association à un site ou un étage. Si vous fournissez un nouveau fichier, l'ancien sera remplacé.",
                "parameters": [
                    {
                        "description": "ID de la carte à mettre à jour.",
                        "in": "path",
                        "name": "carte_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "file": {
                                        "description": "Nouveau fichier image de la carte (png, jpg, etc.)",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "center_lat": {
                                        "description": "Nouvelle latitude du centre de la carte",
                                        "type": "number"
                                    },
                                    "center_lng": {
                                        "description": "Nouvelle longitude du centre de la carte",
                                        "type": "number"
                                    },
                                    "zoom": {
                                        "description": "Nouveau niveau de zoom de la carte",
                                        "type": "number"
                                    },
                                    "site_id": {
                                        "description": "Nouvel ID du site auquel la carte sera associée (si la carte est liée à un site)",
                                        "type": "integer"
                                    },
                                    "etage_id": {
                                        "description": "Nouvel ID de l'étage auquel la carte sera associée (si la carte est liée à un étage)",
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Carte mise à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "carte": {
                                            "properties": {
                                                "center_lat": {
                                                    "example": 48.8566,
                                                    "type": "number"
                                                },
                                                "center_lng": {
                                                    "example": 2.3522,
                                                    "type": "number"
                                                },
                                                "chemin": {
                                                    "example": "http://localhost:5000/uploads/vue_site.jpg",
                                                    "type": "string"
                                                },
                                                "etage_id": {
                                                    "example": null,
                                                    "type": "integer"
                                                },
                                                "id": {
                                                    "example": 1,
                                                    "type": "integer"
                                                },
                                                "site_id": {
                                                    "example": 3,
                                                    "type": "integer"
                                                },
                                                "zoom": {
                                                    "example": 1,
                                                    "type": "number"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "example": "Carte mise à jour avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de requête, paramètres invalides ou association incorrecte."
                    },
                    "404": {
                        "description": "Carte non trouvée."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            }
        },
        "/cartes/upload-carte": {
            "post": {
                "description": "Upload d'une carte avec ses paramètres (centre, zoom) et son association à un site ou un étage. Vous devez fournir l'ID du site (`site_id`) ou l'ID de l'étage (`etage_id`), mais pas les deux. La réponse renvoie une URL accessible pour l'image uploadée.",
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "file": {
                                        "description": "Fichier image de la carte (png, jpg, etc.)",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "center_lat": {
                                        "description": "Latitude du centre de la carte",
                                        "type": "number",
                                        "default": 0
                                    },
                                    "center_lng": {
                                        "description": "Longitude du centre de la carte",
                                        "type": "number",
                                        "default": 0
                                    },
                                    "zoom": {
                                        "description": "Niveau de zoom de la carte",
                                        "type": "number",
                                        "default": 1
                                    },
                                    "site_id": {
                                        "description": "ID du site auquel la carte sera associée (si la carte est liée à un site)",
                                        "type": "integer"
                                    },
                                    "etage_id": {
                                        "description": "ID de l'étage auquel la carte sera associée (si la carte est liée à un étage)",
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "file"
                                ]
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Fichier uploadé avec succès, carte sauvegardée avec une URL accessible pour l'image.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "carte": {
                                            "properties": {
                                                "center_lat": {
                                                    "example": 48.8566,
                                                    "type": "number"
                                                },
                                                "center_lng": {
                                                    "example": 2.3522,
                                                    "type": "number"
                                                },
                                                "chemin": {
                                                    "example": "http://localhost:5000/uploads/vue_site.jpg",
                                                    "type": "string"
                                                },
                                                "etage_id": {
                                                    "example": null,
                                                    "type": "integer"
                                                },
                                                "id": {
                                                    "example": 1,
                                                    "type": "integer"
                                                },
                                                "site_id": {
                                                    "example": 3,
                                                    "type": "integer"
                                                },
                                                "zoom": {
                                                    "example": 1,
                                                    "type": "number"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "example": "Fichier uploadé avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de requête, fichier non fourni, paramètres invalides ou aucune association renseignée."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            }
        },
        "/cartes/uploads/{filename}": {
            "get": {
                "description": "Retourne le fichier image uploadé à partir du nom de fichier fourni.",
                "parameters": [
                    {
                        "description": "Nom du fichier à servir.",
                        "in": "path",
                        "name": "filename",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Fichier image renvoyé avec succès."
                    },
                    "404": {
                        "description": "Fichier non trouvé."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            }
        },
        "/config/": {
            "get": {
                "description": "Récupère la liste de toutes les configurations.",
                "responses": {
                    "200": {
                        "description": "Liste des configurations.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "key": {
                                                "example": "site_name",
                                                "type": "string"
                                            },
                                            "value": {
                                                "example": "Mon Site",
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Configuration CRUD"
                ]
            },
            "post": {
                "description": "Crée une nouvelle configuration.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "key": {
                                        "example": "site_name",
                                        "type": "string"
                                    },
                                    "value": {
                                        "example": "Mon Site",
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "key",
                                    "value"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Configuration créée avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "key": {
                                            "example": "site_name",
                                            "type": "string"
                                        },
                                        "value": {
                                            "example": "Mon Site",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Données invalides ou manquantes."
                    },
                    "409": {
                        "description": "Une configuration avec cette clé existe déjà."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Configuration CRUD"
                ]
            }
        },
        "/config/key/{key}": {
            "get": {
                "description": "Récupère une configuration par sa clé.",
                "parameters": [
                    {
                        "description": "Clé de la configuration à récupérer",
                        "in": "path",
                        "name": "key",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Configuration récupérée avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "key": {
                                            "example": "site_name",
                                            "type": "string"
                                        },
                                        "value": {
                                            "example": "Mon Site",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Configuration non trouvée."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Configuration CRUD"
                ]
            }
        },
        "/config/{config_id}": {
            "put": {
                "description": "Modifie une configuration par son ID.",
                "parameters": [
                    {
                        "description": "ID de la configuration à modifier",
                        "in": "path",
                        "name": "config_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "key": {
                                        "example": "site_name",
                                        "type": "string"
                                    },
                                    "value": {
                                        "example": "Mon Site",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Configuration modifiée avec succès."
                    },
                    "404": {
                        "description": "Configuration non trouvée."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Configuration CRUD"
                ]
            }
        },
        "/etages/": {
            "get": {
                "description": "Récupère la liste de tous les étages.",
                "responses": {
                    "200": {
                        "description": "Liste des étages.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "batiment_id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "name": {
                                                "example": "Etage 1",
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Etage CRUD"
                ]
            },
            "post": {
                "description": "Crée un nouvel étage.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "batiment_id": {
                                        "example": 1,
                                        "type": "integer"
                                    },
                                    "name": {
                                        "example": "Etage 1",
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "name",
                                    "batiment_id"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Étage créé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "batiment_id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Etage 1",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    }
                },
                "tags": [
                    "Etage CRUD"
                ]
            }
        },
        "/etages/carte/update_by_site_etage/{site_id}/{etage_id}": {
            "put": {
                "description": "Met à jour une carte existante associée à un étage d'un site spécifique. Vous pouvez mettre à jour l'image, les coordonnées du centre et le zoom. Si vous fournissez un nouveau fichier, l'ancien sera remplacé.",
                "parameters": [
                    {
                        "description": "ID du site",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "description": "ID de l'étage dont la carte sera mise à jour",
                        "in": "path",
                        "name": "etage_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "$ref": "#/components/requestBodies/putEtagesCarteUpdateBySiteEtage_siteId_EtageId_"
                },
                "responses": {
                    "200": {
                        "description": "Carte mise à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "carte": {
                                            "properties": {
                                                "center_lat": {
                                                    "example": 48.8566,
                                                    "type": "number"
                                                },
                                                "center_lng": {
                                                    "example": 2.3522,
                                                    "type": "number"
                                                },
                                                "chemin": {
                                                    "example": "http://localhost:5000/uploads/etage_carte.jpg",
                                                    "type": "string"
                                                },
                                                "etage_id": {
                                                    "example": 2,
                                                    "type": "integer"
                                                },
                                                "id": {
                                                    "example": 1,
                                                    "type": "integer"
                                                },
                                                "site_id": {
                                                    "example": null,
                                                    "type": "integer"
                                                },
                                                "zoom": {
                                                    "example": 1,
                                                    "type": "number"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "example": "Carte mise à jour avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de requête ou paramètres invalides."
                    },
                    "404": {
                        "description": "Site, étage ou carte non trouvé."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            }
        },
        "/etages/carte/{etage_id}/assign": {
            "post": {
                "description": "Assigne une carte existante à un étage. Le JSON doit contenir 'card_id'.",
                "parameters": [
                    {
                        "description": "ID de l'étage",
                        "in": "path",
                        "name": "etage_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "card_id": {
                                        "example": 3,
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "card_id"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Carte assignée à l'étage avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Carte assignée à l'étage avec succès.",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Carte déjà assignée ou champ manquant."
                    },
                    "404": {
                        "description": "Étage ou carte non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "assignation carte"
                ]
            }
        },
        "/etages/{etage_id}": {
            "delete": {
                "description": "Supprime un étage par son ID, met à jour les BAES associés (etage_id = null) et supprime la carte associée.",
                "parameters": [
                    {
                        "description": "ID de l'étage à supprimer",
                        "in": "path",
                        "name": "etage_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Étage supprimé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "baes_updated": {
                                            "example": 3,
                                            "type": "integer"
                                        },
                                        "carte_deleted": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "message": {
                                            "example": "Étage supprimé avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Étage non trouvé."
                    }
                },
                "tags": [
                    "Etage CRUD"
                ]
            },
            "get": {
                "description": "Récupère un étage par son ID.",
                "parameters": [
                    {
                        "description": "ID de l'étage à récupérer",
                        "in": "path",
                        "name": "etage_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de l'étage.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "batiment_id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Etage 1",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Étage non trouvé."
                    }
                },
                "tags": [
                    "Etage CRUD"
                ]
            },
            "put": {
                "description": "Met à jour un étage existant par son ID.",
                "parameters": [
                    {
                        "description": "ID de l'étage à mettre à jour",
                        "in": "path",
                        "name": "etage_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "batiment_id": {
                                        "example": 2,
                                        "type": "integer"
                                    },
                                    "name": {
                                        "example": "Etage mis à jour",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Étage mis à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "batiment_id": {
                                            "example": 2,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Etage mis à jour",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Étage non trouvé."
                    }
                },
                "tags": [
                    "Etage CRUD"
                ]
            }
        },
        "/etages/{etage_id}/baes": {
            "get": {
                "description": "Récupère tous les BAES d'un étage par son ID.",
                "parameters": [
                    {
                        "description": "ID de l'étage dont on veut récupérer les BAES",
                        "in": "path",
                        "name": "etage_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des BAES de l'étage.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "erreurs": {
                                                "items": {
                                                    "properties": {
                                                        "erreur": {
                                                            "example": 1,
                                                            "type": "integer"
                                                        },
                                                        "id": {
                                                            "example": 1,
                                                            "type": "integer"
                                                        },
                                                        "is_ignored": {
                                                            "example": false,
                                                            "type": "boolean"
                                                        },
                                                        "is_solved": {
                                                            "example": false,
                                                            "type": "boolean"
                                                        },
                                                        "timestamp": {
                                                            "example": "2025-04-03T12:34:56Z",
                                                            "type": "string"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "type": "array"
                                            },
                                            "etage_id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "name": {
                                                "example": "BAES 1",
                                                "type": "string"
                                            },
                                            "position": {
                                                "example": {
                                                    "x": 100,
                                                    "y": 200
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Étage non trouvé."
                    }
                },
                "tags": [
                    "Etage CRUD"
                ]
            }
        },
        "/general/batiment/{batiment_id}/alldata": {
            "get": {
                "description": "Retourne toutes les informations liées à un bâtiment : ses étages, les cartes associées et les BAES présents.",
                "parameters": [
                    {
                        "description": "L'ID du bâtiment",
                        "in": "path",
                        "name": "batiment_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Données complètes du bâtiment",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "etages": {
                                            "items": {
                                                "properties": {
                                                    "baes": {
                                                        "items": {
                                                            "properties": {
                                                                "erreurs": {
                                                                    "items": {
                                                                        "properties": {
                                                                            "erreur": {
                                                                                "example": 1,
                                                                                "type": "integer"
                                                                            },
                                                                            "id": {
                                                                                "example": 1,
                                                                                "type": "integer"
                                                                            },
                                                                            "is_ignored": {
                                                                                "example": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "is_solved": {
                                                                                "example": false,
                                                                                "type": "boolean"
                                                                            },
                                                                            "temperature": {
                                                                                "example": 22.5,
                                                                                "type": "number"
                                                                            },
                                                                            "timestamp": {
                                                                                "example": "2025-04-03T12:34:56Z",
                                                                                "type": "string"
                                                                            },
                                                                            "vibration": {
                                                                                "example": true,
                                                                                "type": "boolean"
                                                                            }
                                                                        },
                                                                        "type": "object"
                                                                    },
                                                                    "type": "array"
                                                                },
                                                                "id": {
                                                                    "example": 1,
                                                                    "type": "integer"
                                                                },
                                                                "name": {
                                                                    "example": "BAES 1",
                                                                    "type": "string"
                                                                },
                                                                "position": {
                                                                    "type": "object"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "type": "array"
                                                    },
                                                    "carte": {
                                                        "properties": {
                                                            "center_lat": {
                                                                "example": 48.8566,
                                                                "type": "number"
                                                            },
                                                            "center_lng": {
                                                                "example": 2.3522,
                                                                "type": "number"
                                                            },
                                                            "chemin": {
                                                                "example": "/path/to/image.png",
                                                                "type": "string"
                                                            },
                                                            "etage_id": {
                                                                "example": 1,
                                                                "type": "integer"
                                                            },
                                                            "id": {
                                                                "example": 1,
                                                                "type": "integer"
                                                            },
                                                            "site_id": {
                                                                "example": 1,
                                                                "type": "integer"
                                                            },
                                                            "zoom": {
                                                                "example": 10,
                                                                "type": "integer"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "id": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "example": "Etage 1",
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Batiment A",
                                            "type": "string"
                                        },
                                        "polygon_points": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Bâtiment non trouvé."
                    }
                },
                "summary": "Route qui retourne pour un bâtiment donné l'ensemble de ses étages,\nainsi que pour chaque étage, sa carte et ses BAES avec leurs erreurs.",
                "tags": [
                    "general"
                ]
            }
        },
        "/general/user/{user_id}/alldata": {
            "get": {
                "description": "Retourne pour un utilisateur donné l'ensemble des sites auxquels il a accès, ainsi que pour chaque site, la liste de ses bâtiments, pour chaque bâtiment, la liste de ses étages, pour chaque étage, la liste de ses BAES et, pour chaque BAES, l'historique de ses statuts. Pour les cartes, seule l'id est retournée.",
                "parameters": [
                    {
                        "description": "L'ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Données complètes de l'utilisateur",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "sites": {
                                            "items": {
                                                "properties": {
                                                    "batiments": {
                                                        "items": {
                                                            "properties": {
                                                                "etages": {
                                                                    "items": {
                                                                        "properties": {
                                                                            "baes": {
                                                                                "items": {
                                                                                    "properties": {
                                                                                        "erreurs": {
                                                                                            "items": {
                                                                                                "properties": {
                                                                                                    "erreur": {
                                                                                                        "example": 1,
                                                                                                        "type": "integer"
                                                                                                    },
                                                                                                    "id": {
                                                                                                        "example": 1,
                                                                                                        "type": "integer"
                                                                                                    },
                                                                                                    "is_ignored": {
                                                                                                        "example": false,
                                                                                                        "type": "boolean"
                                                                                                    },
                                                                                                    "is_solved": {
                                                                                                        "example": false,
                                                                                                        "type": "boolean"
                                                                                                    },
                                                                                                    "temperature": {
                                                                                                        "example": 22.5,
                                                                                                        "type": "number"
                                                                                                    },
                                                                                                    "timestamp": {
                                                                                                        "example": "2025-04-03T12:34:56Z",
                                                                                                        "type": "string"
                                                                                                    },
                                                                                                    "vibration": {
                                                                                                        "example": true,
                                                                                                        "type": "boolean"
                                                                                                    }
                                                                                                },
                                                                                                "type": "object"
                                                                                            },
                                                                                            "type": "array"
                                                                                        },
                                                                                        "id": {
                                                                                            "example": 1,
                                                                                            "type": "integer"
                                                                                        },
                                                                                        "name": {
                                                                                            "example": "BAES 1",
                                                                                            "type": "string"
                                                                                        },
                                                                                        "position": {
                                                                                            "type": "object"
                                                                                        }
                                                                                    },
                                                                                    "type": "object"
                                                                                },
                                                                                "type": "array"
                                                                            },
                                                                            "carte": {
                                                                                "properties": {
                                                                                    "center_lat": {
                                                                                        "example": 48.8566,
                                                                                        "type": "number"
                                                                                    },
                                                                                    "center_lng": {
                                                                                        "example": 2.3522,
                                                                                        "type": "number"
                                                                                    },
                                                                                    "chemin": {
                                                                                        "example": "/path/to/image.png",
                                                                                        "type": "string"
                                                                                    },
                                                                                    "etage_id": {
                                                                                        "example": 1,
                                                                                        "type": "integer"
                                                                                    },
                                                                                    "id": {
                                                                                        "example": 1,
                                                                                        "type": "integer"
                                                                                    },
                                                                                    "site_id": {
                                                                                        "example": 1,
                                                                                        "type": "integer"
                                                                                    },
                                                                                    "zoom": {
                                                                                        "example": 10,
                                                                                        "type": "integer"
                                                                                    }
                                                                                },
                                                                                "type": "object"
                                                                            },
                                                                            "id": {
                                                                                "example": 1,
                                                                                "type": "integer"
                                                                            },
                                                                            "name": {
                                                                                "example": "Etage 1",
                                                                                "type": "string"
                                                                            }
                                                                        },
                                                                        "type": "object"
                                                                    },
                                                                    "type": "array"
                                                                },
                                                                "id": {
                                                                    "example": 1,
                                                                    "type": "integer"
                                                                },
                                                                "name": {
                                                                    "example": "Batiment A",
                                                                    "type": "string"
                                                                },
                                                                "polygon_points": {
                                                                    "type": "object"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "type": "array"
                                                    },
                                                    "carte": {
                                                        "properties": {
                                                            "center_lat": {
                                                                "example": 48.8566,
                                                                "type": "number"
                                                            },
                                                            "center_lng": {
                                                                "example": 2.3522,
                                                                "type": "number"
                                                            },
                                                            "chemin": {
                                                                "example": "/path/to/image.png",
                                                                "type": "string"
                                                            },
                                                            "etage_id": {
                                                                "example": 1,
                                                                "type": "integer"
                                                            },
                                                            "id": {
                                                                "example": 1,
                                                                "type": "integer"
                                                            },
                                                            "site_id": {
                                                                "example": 1,
                                                                "type": "integer"
                                                            },
                                                            "zoom": {
                                                                "example": 10,
                                                                "type": "integer"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "id": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "example": "Site par défaut",
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé."
                    }
                },
                "summary": "Route qui retourne pour un utilisateur donné l'ensemble des sites auxquels il a accès,\nainsi que la hiérarchie complète :\n  Site -> Batiment -> Etage -> BAES -> HistoriqueErreur",
                "tags": [
                    "general"
                ]
            }
        },
        "/general/version": {
            "get": {
                "description": "Retourne la version actuelle de l'API.",
                "responses": {
                    "200": {
                        "description": "Version de l'API",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "version": {
                                            "example": "1.0",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "summary": "Route qui retourne la version actuelle de l'API.",
                "tags": [
                    "general"
                ]
            }
        },
        "/roles/": {
            "get": {
                "description": "Récupère la liste de tous les rôles disponibles.",
                "responses": {
                    "200": {
                        "description": "Liste des rôles.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "name": {
                                                "example": "admin",
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    }
                },
                "summary": "Récupère la liste de tous les rôles disponibles.",
                "tags": [
                    "Roles"
                ]
            },
            "post": {
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "example": "admin",
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "name"
                                ],
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Rôle créé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Rôle créé",
                                            "type": "string"
                                        },
                                        "role": {
                                            "properties": {
                                                "id": {
                                                    "example": 1,
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "example": "admin",
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête (rôle existant ou champ manquant)."
                    }
                },
                "summary": "Crée un rôle.",
                "tags": [
                    "Roles"
                ]
            }
        },
        "/roles/{id}": {
            "delete": {
                "parameters": [
                    {
                        "description": "ID du rôle à supprimer.",
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Rôle supprimé avec succès."
                    },
                    "404": {
                        "description": "Rôle non trouvé."
                    }
                },
                "summary": "Supprime un rôle.",
                "tags": [
                    "Roles"
                ]
            }
        },
        "/sites/": {
            "get": {
                "description": "Récupère la liste de tous les sites.",
                "responses": {
                    "200": {
                        "description": "Liste des sites.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "name": {
                                                "example": "Site 1",
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            },
            "post": {
                "description": "Crée un nouveau site.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "example": "Site 1",
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "name"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Site créé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Site 1",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            }
        },
        "/sites/carte/get_by_floor/{floor_id}": {
            "get": {
                "description": "Récupère la carte associée à l'étage dont l'ID est fourni en paramètre.",
                "parameters": [
                    {
                        "description": "ID de l'étage",
                        "in": "path",
                        "name": "floor_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Carte associée à l'étage.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "center_lat": {
                                            "example": 0.3,
                                            "type": "number"
                                        },
                                        "center_lng": {
                                            "example": 0.4,
                                            "type": "number"
                                        },
                                        "chemin": {
                                            "example": "/path/to/floor_image.png",
                                            "type": "string"
                                        },
                                        "etage_id": {
                                            "example": 2,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 3,
                                            "type": "integer"
                                        },
                                        "site_id": {
                                            "example": null,
                                            "type": "integer"
                                        },
                                        "zoom": {
                                            "example": 1.2,
                                            "type": "number"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Étape ou carte non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            }
        },
        "/sites/carte/get_by_site/{site_id}": {
            "get": {
                "description": "Récupère la carte associée au site dont l'ID est fourni en paramètre.",
                "parameters": [
                    {
                        "description": "ID du site",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Carte associée au site.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "center_lat": {
                                            "example": 0.1,
                                            "type": "number"
                                        },
                                        "center_lng": {
                                            "example": 0.2,
                                            "type": "number"
                                        },
                                        "chemin": {
                                            "example": "/path/to/image.png",
                                            "type": "string"
                                        },
                                        "etage_id": {
                                            "example": null,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 5,
                                            "type": "integer"
                                        },
                                        "site_id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "zoom": {
                                            "example": 1,
                                            "type": "number"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site ou carte non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            }
        },
        "/sites/carte/update_by_site/{site_id}": {
            "put": {
                "description": "Met à jour une carte existante associée à un site. Vous pouvez mettre à jour l'image, les coordonnées du centre et le zoom. Si vous fournissez un nouveau fichier, l'ancien sera remplacé.",
                "parameters": [
                    {
                        "description": "ID du site dont la carte sera mise à jour.",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "$ref": "#/components/requestBodies/putEtagesCarteUpdateBySiteEtage_siteId_EtageId_"
                },
                "responses": {
                    "200": {
                        "description": "Carte mise à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "carte": {
                                            "properties": {
                                                "center_lat": {
                                                    "example": 48.8566,
                                                    "type": "number"
                                                },
                                                "center_lng": {
                                                    "example": 2.3522,
                                                    "type": "number"
                                                },
                                                "chemin": {
                                                    "example": "http://localhost:5000/uploads/vue_site.jpg",
                                                    "type": "string"
                                                },
                                                "etage_id": {
                                                    "example": null,
                                                    "type": "integer"
                                                },
                                                "id": {
                                                    "example": 1,
                                                    "type": "integer"
                                                },
                                                "site_id": {
                                                    "example": 3,
                                                    "type": "integer"
                                                },
                                                "zoom": {
                                                    "example": 1,
                                                    "type": "number"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "example": "Carte mise à jour avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de requête ou paramètres invalides."
                    },
                    "404": {
                        "description": "Site ou carte non trouvé."
                    }
                },
                "tags": [
                    "carte crud"
                ]
            }
        },
        "/sites/carte/{site_id}/assign": {
            "post": {
                "description": "Assigne une carte existante à un site. Le JSON doit contenir 'card_id'.",
                "parameters": [
                    {
                        "description": "ID du site",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "card_id": {
                                        "example": 5,
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "card_id"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Carte assignée au site avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Carte assignée au site avec succès.",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Carte déjà assignée ou champ manquant."
                    },
                    "404": {
                        "description": "Site ou carte non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "assignation carte"
                ]
            }
        },
        "/sites/{site_id}": {
            "delete": {
                "description": "Supprime un site par son ID et tous les éléments associés (bâtiments, étages, BAES, erreurs, cartes) en cascade. Les liaisons user-site-role sont conservées avec site_id=NULL pour maintenir les relations user-role.",
                "parameters": [
                    {
                        "description": "ID du site à supprimer",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Site supprimé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "baes_deleted": {
                                            "example": 10,
                                            "type": "integer"
                                        },
                                        "batiments_deleted": {
                                            "example": 2,
                                            "type": "integer"
                                        },
                                        "cartes_deleted": {
                                            "example": 3,
                                            "type": "integer"
                                        },
                                        "erreurs_deleted": {
                                            "example": 15,
                                            "type": "integer"
                                        },
                                        "etages_deleted": {
                                            "example": 5,
                                            "type": "integer"
                                        },
                                        "message": {
                                            "example": "Site supprimé avec succès",
                                            "type": "string"
                                        },
                                        "user_site_roles_preserved": {
                                            "example": 4,
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site non trouvé."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            },
            "get": {
                "description": "Récupère un site par son ID.",
                "parameters": [
                    {
                        "description": "ID du site à récupérer",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du site.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Site 1",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site non trouvé."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            },
            "put": {
                "description": "Met à jour un site existant.",
                "parameters": [
                    {
                        "description": "ID du site à mettre à jour",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "$ref": "#/components/requestBodies/Body2"
                },
                "responses": {
                    "200": {
                        "description": "Site mis à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Site mis à jour",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site non trouvé."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            }
        },
        "/sites/{site_id}/": {
            "delete": {
                "description": "Supprime un site par son ID et tous les éléments associés (bâtiments, étages, BAES, erreurs, cartes) en cascade. Les liaisons user-site-role sont conservées avec site_id=NULL pour maintenir les relations user-role.",
                "parameters": [
                    {
                        "description": "ID du site à supprimer",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Site supprimé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "baes_deleted": {
                                            "example": 10,
                                            "type": "integer"
                                        },
                                        "batiments_deleted": {
                                            "example": 2,
                                            "type": "integer"
                                        },
                                        "cartes_deleted": {
                                            "example": 3,
                                            "type": "integer"
                                        },
                                        "erreurs_deleted": {
                                            "example": 15,
                                            "type": "integer"
                                        },
                                        "etages_deleted": {
                                            "example": 5,
                                            "type": "integer"
                                        },
                                        "message": {
                                            "example": "Site supprimé avec succès",
                                            "type": "string"
                                        },
                                        "user_site_roles_preserved": {
                                            "example": 4,
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site non trouvé."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            },
            "get": {
                "description": "Récupère un site par son ID.",
                "parameters": [
                    {
                        "description": "ID du site à récupérer",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du site.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Site 1",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site non trouvé."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            },
            "put": {
                "description": "Met à jour un site existant.",
                "parameters": [
                    {
                        "description": "ID du site à mettre à jour",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "$ref": "#/components/requestBodies/Body2"
                },
                "responses": {
                    "200": {
                        "description": "Site mis à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "name": {
                                            "example": "Site mis à jour",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site non trouvé."
                    }
                },
                "tags": [
                    "Site CRUD"
                ]
            }
        },
        "/status/": {
            "get": {
                "description": "Récupère la liste de toutes les erreurs.",
                "responses": {
                    "200": {
                        "description": "Liste des erreurs.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "baes_id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "erreur": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "is_ignored": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "is_solved": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "temperature": {
                                                "example": 25.5,
                                                "format": "float",
                                                "nullable": true,
                                                "type": "number"
                                            },
                                            "timestamp": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "updated_at": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "vibration": {
                                                "example": true,
                                                "nullable": true,
                                                "type": "boolean"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            },
            "post": {
                "description": "Crée une nouvelle entrée d'erreur.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "baes_id": {
                                        "example": 1,
                                        "format": "int64",
                                        "type": "integer"
                                    },
                                    "erreur": {
                                        "description": "Type d'erreur décrit dans le front (1 pour erreur_connexion, 2 pour erreur_batterie)",
                                        "example": 1,
                                        "type": "integer"
                                    },
                                    "is_ignored": {
                                        "example": false,
                                        "type": "boolean"
                                    },
                                    "is_solved": {
                                        "example": false,
                                        "type": "boolean"
                                    },
                                    "label": {
                                        "description": "Étiquette du BAES (utilisé si le BAES n'existe pas)",
                                        "example": "Étiquette BAES",
                                        "nullable": true,
                                        "type": "string"
                                    },
                                    "name": {
                                        "description": "Nom du BAES (utilisé si le BAES n'existe pas)",
                                        "example": "BAES-1",
                                        "nullable": true,
                                        "type": "string"
                                    },
                                    "temperature": {
                                        "description": "Température du BAES (utilisé si le BAES n'existe pas)",
                                        "example": 25.5,
                                        "format": "float",
                                        "nullable": true,
                                        "type": "number"
                                    },
                                    "vibration": {
                                        "description": "État de vibration du BAES (utilisé si le BAES n'existe pas)",
                                        "example": true,
                                        "nullable": true,
                                        "type": "boolean"
                                    }
                                },
                                "required": [
                                    "baes_id",
                                    "erreur"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Erreur créée avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "baes": {
                                            "properties": {
                                                "id": {
                                                    "example": 1,
                                                    "format": "int64",
                                                    "type": "integer"
                                                },
                                                "label": {
                                                    "example": "Étiquette BAES",
                                                    "nullable": true,
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "example": "BAES-1",
                                                    "nullable": true,
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "baes_id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "erreur": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "is_ignored": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "is_solved": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "temperature": {
                                            "example": 25.5,
                                            "format": "float",
                                            "nullable": true,
                                            "type": "number"
                                        },
                                        "timestamp": {
                                            "example": "2023-01-01T12:00:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        },
                                        "vibration": {
                                            "example": true,
                                            "nullable": true,
                                            "type": "boolean"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    },
                    "404": {
                        "description": "BAES non trouvé."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/acknowledged": {
            "get": {
                "description": "Récupère la liste des erreurs acquittées avec les informations sur qui les a acquittées.",
                "responses": {
                    "200": {
                        "description": "Liste des erreurs acquittées.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "acknowledged_at": {
                                                "example": "2023-01-02T14:30:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "acknowledged_by_login": {
                                                "example": "user1",
                                                "type": "string"
                                            },
                                            "acknowledged_by_user_id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "baes_id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "erreur": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "is_ignored": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "is_solved": {
                                                "example": true,
                                                "type": "boolean"
                                            },
                                            "temperature": {
                                                "example": 25.5,
                                                "format": "float",
                                                "nullable": true,
                                                "type": "number"
                                            },
                                            "timestamp": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "updated_at": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "vibration": {
                                                "example": true,
                                                "nullable": true,
                                                "type": "boolean"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/after/{updated_at}": {
            "get": {
                "description": "Récupère toutes les erreurs modifiées à ou après le timestamp spécifié (à la seconde près).",
                "parameters": [
                    {
                        "description": "Timestamp ISO 8601 (ex: 2023-01-01T12:00:00Z) à partir duquel récupérer les erreurs modifiées",
                        "in": "path",
                        "name": "updated_at",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des erreurs modifiées à ou après le timestamp spécifié.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "acknowledged_at": {
                                                "example": "2023-01-02T14:30:00Z",
                                                "format": "date-time",
                                                "nullable": true,
                                                "type": "string"
                                            },
                                            "acknowledged_by_login": {
                                                "example": "user1",
                                                "nullable": true,
                                                "type": "string"
                                            },
                                            "acknowledged_by_user_id": {
                                                "example": 1,
                                                "nullable": true,
                                                "type": "integer"
                                            },
                                            "baes_id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "erreur": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 13,
                                                "type": "integer"
                                            },
                                            "is_ignored": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "is_solved": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "temperature": {
                                                "example": 25.5,
                                                "format": "float",
                                                "nullable": true,
                                                "type": "number"
                                            },
                                            "timestamp": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "updated_at": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "vibration": {
                                                "example": true,
                                                "nullable": true,
                                                "type": "boolean"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Format de timestamp invalide."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/baes/{baes_id}": {
            "get": {
                "description": "Récupère toutes les erreurs pour un BAES spécifique.",
                "parameters": [
                    {
                        "description": "ID du BAES dont on veut récupérer les erreurs",
                        "in": "path",
                        "name": "baes_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des erreurs pour le BAES spécifié.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "acknowledged_at": {
                                                "example": "2023-01-02T14:30:00Z",
                                                "format": "date-time",
                                                "nullable": true,
                                                "type": "string"
                                            },
                                            "acknowledged_by_login": {
                                                "example": "user1",
                                                "nullable": true,
                                                "type": "string"
                                            },
                                            "acknowledged_by_user_id": {
                                                "example": 1,
                                                "nullable": true,
                                                "type": "integer"
                                            },
                                            "baes_id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "erreur": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "is_ignored": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "is_solved": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "temperature": {
                                                "example": 25.5,
                                                "format": "float",
                                                "nullable": true,
                                                "type": "number"
                                            },
                                            "timestamp": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "updated_at": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "vibration": {
                                                "example": true,
                                                "nullable": true,
                                                "type": "boolean"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "BAES non trouvé."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/baes/{baes_id}/type/{erreur}": {
            "put": {
                "description": "Modifie les détails d'une erreur identifiée par le BAES et le type d'erreur.",
                "parameters": [
                    {
                        "description": "ID du BAES associé à l'erreur",
                        "in": "path",
                        "name": "baes_id",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    {
                        "description": "int 64 du type d'erreur (1 pour erreur_connexion, 2 pour erreur_batterie, etc.)",
                        "in": "path",
                        "name": "erreur",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "is_ignored": {
                                        "example": false,
                                        "type": "boolean"
                                    },
                                    "is_solved": {
                                        "example": false,
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Erreur modifiée avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "acknowledged_at": {
                                            "example": "2023-01-02T14:30:00Z",
                                            "format": "date-time",
                                            "nullable": true,
                                            "type": "string"
                                        },
                                        "acknowledged_by_login": {
                                            "example": "user1",
                                            "nullable": true,
                                            "type": "string"
                                        },
                                        "acknowledged_by_user_id": {
                                            "example": 1,
                                            "nullable": true,
                                            "type": "integer"
                                        },
                                        "baes_id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "erreur": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "is_ignored": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "is_solved": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "timestamp": {
                                            "example": "2023-01-01T12:00:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    },
                    "404": {
                        "description": "Erreur non trouvée ou BAES non trouvé."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/etage/{etage_id}": {
            "get": {
                "description": "Récupère toutes les erreurs de tous les BAES présents dans un étage spécifique.",
                "parameters": [
                    {
                        "description": "ID de l'étage dont on veut récupérer les erreurs de tous les BAES",
                        "in": "path",
                        "name": "etage_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des erreurs pour tous les BAES de l'étage spécifié.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "acknowledged_at": {
                                                "example": "2023-01-02T14:30:00Z",
                                                "format": "date-time",
                                                "nullable": true,
                                                "type": "string"
                                            },
                                            "acknowledged_by_login": {
                                                "example": "user1",
                                                "nullable": true,
                                                "type": "string"
                                            },
                                            "acknowledged_by_user_id": {
                                                "example": 1,
                                                "nullable": true,
                                                "type": "integer"
                                            },
                                            "baes_id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "baes_name": {
                                                "example": "BAES-001",
                                                "type": "string"
                                            },
                                            "erreur": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "is_ignored": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "is_solved": {
                                                "example": false,
                                                "type": "boolean"
                                            },
                                            "temperature": {
                                                "example": 25.5,
                                                "format": "float",
                                                "nullable": true,
                                                "type": "number"
                                            },
                                            "timestamp": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "updated_at": {
                                                "example": "2023-01-01T12:00:00Z",
                                                "format": "date-time",
                                                "type": "string"
                                            },
                                            "vibration": {
                                                "example": true,
                                                "nullable": true,
                                                "type": "boolean"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Étage non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/latest": {
            "get": {
                "description": "Récupère l'erreur la plus récemment modifiée ou créée.",
                "responses": {
                    "200": {
                        "description": "Détails de l'erreur la plus récente.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "acknowledged_at": {
                                            "example": "2023-01-02T14:30:00Z",
                                            "format": "date-time",
                                            "nullable": true,
                                            "type": "string"
                                        },
                                        "acknowledged_by_login": {
                                            "example": "user1",
                                            "nullable": true,
                                            "type": "string"
                                        },
                                        "acknowledged_by_user_id": {
                                            "example": 1,
                                            "nullable": true,
                                            "type": "integer"
                                        },
                                        "baes_id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "erreur": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "is_ignored": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "is_solved": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "temperature": {
                                            "example": 25.5,
                                            "format": "float",
                                            "nullable": true,
                                            "type": "number"
                                        },
                                        "timestamp": {
                                            "example": "2023-01-01T12:00:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        },
                                        "updated_at": {
                                            "example": "2023-01-01T12:00:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        },
                                        "vibration": {
                                            "example": true,
                                            "nullable": true,
                                            "type": "boolean"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Aucune erreur trouvée."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/user/{user_id}": {
            "get": {
                "description": "Récupère le dernier message de status pour chaque BAES visible par un utilisateur et chaque BAES non attribué à un étage.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des BAES avec leur dernier status.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "etage_id": {
                                                "example": 1,
                                                "nullable": true,
                                                "type": "integer"
                                            },
                                            "id": {
                                                "example": 1,
                                                "format": "int64",
                                                "type": "integer"
                                            },
                                            "label": {
                                                "example": "Étiquette BAES 1",
                                                "type": "string"
                                            },
                                            "latest_status": {
                                                "nullable": true,
                                                "properties": {
                                                    "erreur": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "id": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "is_ignored": {
                                                        "example": false,
                                                        "type": "boolean"
                                                    },
                                                    "is_solved": {
                                                        "example": false,
                                                        "type": "boolean"
                                                    },
                                                    "temperature": {
                                                        "example": 25.5,
                                                        "format": "float",
                                                        "nullable": true,
                                                        "type": "number"
                                                    },
                                                    "timestamp": {
                                                        "example": "2023-01-01T12:00:00Z",
                                                        "format": "date-time",
                                                        "type": "string"
                                                    },
                                                    "vibration": {
                                                        "example": true,
                                                        "nullable": true,
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "name": {
                                                "example": "BAES 1",
                                                "type": "string"
                                            },
                                            "position": {
                                                "example": {
                                                    "x": 100,
                                                    "y": 200
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "summary": "Récupère le dernier message de status pour chaque BAES visible par un utilisateur et chaque BAES non attribué à un étage.",
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/{status_id}": {
            "delete": {
                "description": "Supprime une erreur par son ID.",
                "parameters": [
                    {
                        "description": "ID de l'erreur à supprimer",
                        "in": "path",
                        "name": "status_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Erreur supprimée avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Erreur supprimée avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Erreur non trouvée."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            },
            "get": {
                "description": "Récupère une erreur par son ID.",
                "parameters": [
                    {
                        "description": "ID de l'erreur à récupérer",
                        "in": "path",
                        "name": "status_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de l'erreur.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "baes_id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "erreur": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "is_ignored": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "is_solved": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "temperature": {
                                            "example": 25.5,
                                            "format": "float",
                                            "nullable": true,
                                            "type": "number"
                                        },
                                        "timestamp": {
                                            "example": "2023-01-01T12:00:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        },
                                        "updated_at": {
                                            "example": "2023-01-01T12:00:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        },
                                        "vibration": {
                                            "example": true,
                                            "nullable": true,
                                            "type": "boolean"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Erreur non trouvée."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/status/{status_id}/status": {
            "put": {
                "description": "Met à jour le statut d'une erreur (résolu/ignoré) et enregistre l'utilisateur qui a fait l'acquittement.",
                "parameters": [
                    {
                        "description": "ID de l'erreur à mettre à jour",
                        "in": "path",
                        "name": "status_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "is_ignored": {
                                        "example": false,
                                        "type": "boolean"
                                    },
                                    "is_solved": {
                                        "example": true,
                                        "type": "boolean"
                                    },
                                    "user_id": {
                                        "description": "ID de l'utilisateur qui acquitte l'erreur (optionnel)",
                                        "example": 1,
                                        "type": "integer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Statut de l'erreur mis à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "acknowledged_at": {
                                            "example": "2023-01-02T14:30:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        },
                                        "acknowledged_by_login": {
                                            "example": "user1",
                                            "type": "string"
                                        },
                                        "acknowledged_by_user_id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "baes_id": {
                                            "example": 1,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "erreur": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "is_ignored": {
                                            "example": false,
                                            "type": "boolean"
                                        },
                                        "is_solved": {
                                            "example": true,
                                            "type": "boolean"
                                        },
                                        "timestamp": {
                                            "example": "2023-01-01T12:00:00Z",
                                            "format": "date-time",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    },
                    "404": {
                        "description": "Erreur non trouvée."
                    }
                },
                "tags": [
                    "Status CRUD"
                ]
            }
        },
        "/user_site_role": {
            "get": {
                "description": "Récupère toutes les relations avec possibilité de filtrer par user_id, site_id ou role_id",
                "parameters": [
                    {
                        "description": "Filtrer par ID utilisateur",
                        "in": "query",
                        "name": "user_id",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "description": "Filtrer par ID site",
                        "in": "query",
                        "name": "site_id",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "description": "Filtrer par ID rôle",
                        "in": "query",
                        "name": "role_id",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des relations user-site-role",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "$ref": "#/components/schemas/UserSiteRole"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur"
                    }
                },
                "summary": "Récupère toutes les relations user-site-role avec possibilité de filtrer",
                "tags": [
                    "UserSiteRole"
                ]
            },
            "post": {
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "role_id": {
                                        "description": "ID du rôle",
                                        "type": "integer"
                                    },
                                    "site_id": {
                                        "description": "ID du site (null pour rôle global)",
                                        "nullable": true,
                                        "type": "integer"
                                    },
                                    "user_id": {
                                        "description": "ID de l'utilisateur",
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "user_id",
                                    "role_id"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Relation créée avec succès",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserSiteRole"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Données invalides"
                    },
                    "404": {
                        "description": "Ressource non trouvée"
                    },
                    "409": {
                        "description": "La relation existe déjà"
                    }
                },
                "summary": "Crée une nouvelle relation user-site-role",
                "tags": [
                    "UserSiteRole"
                ]
            }
        },
        "/user_site_role/site/{site_id}/users": {
            "get": {
                "parameters": [
                    {
                        "description": "ID du site",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Utilisateurs du site",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "site_id": {
                                            "type": "integer"
                                        },
                                        "site_name": {
                                            "type": "string"
                                        },
                                        "users": {
                                            "items": {
                                                "properties": {
                                                    "created_at": {
                                                        "format": "date-time",
                                                        "type": "string"
                                                    },
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "role_id": {
                                                        "type": "integer"
                                                    },
                                                    "role_name": {
                                                        "type": "string"
                                                    },
                                                    "user_id": {
                                                        "type": "integer"
                                                    },
                                                    "user_login": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Site non trouvé"
                    }
                },
                "summary": "Récupère tous les utilisateurs ayant accès à un site",
                "tags": [
                    "UserSiteRole"
                ]
            }
        },
        "/user_site_role/user/{user_id}/global-role": {
            "post": {
                "description": "Attribue un rôle global (site=null) à un utilisateur. Utile quand un utilisateur n'a plus de site spécifique",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "role_id": {
                                        "description": "ID du rôle global à attribuer",
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "role_id"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Rôle global attribué",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserSiteRole"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Données invalides"
                    },
                    "404": {
                        "description": "Ressource non trouvée"
                    },
                    "409": {
                        "description": "Ce rôle global est déjà attribué"
                    }
                },
                "summary": "Attribue un rôle global (site=null) à un utilisateur",
                "tags": [
                    "UserSiteRole"
                ]
            }
        },
        "/user_site_role/user/{user_id}/permissions": {
            "get": {
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Permissions de l'utilisateur",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "permissions": {
                                            "items": {
                                                "properties": {
                                                    "created_at": {
                                                        "format": "date-time",
                                                        "type": "string"
                                                    },
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "role_id": {
                                                        "type": "integer"
                                                    },
                                                    "role_name": {
                                                        "type": "string"
                                                    },
                                                    "site_id": {
                                                        "nullable": true,
                                                        "type": "integer"
                                                    },
                                                    "site_name": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        },
                                        "user_id": {
                                            "type": "integer"
                                        },
                                        "user_login": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé"
                    }
                },
                "summary": "Récupère tous les sites et rôles associés à un utilisateur",
                "tags": [
                    "UserSiteRole"
                ]
            }
        },
        "/user_site_role/user/{user_id}/site/{site_id}": {
            "delete": {
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "description": "ID du site",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Permissions supprimées",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "remaining_permissions": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ressource non trouvée"
                    }
                },
                "summary": "Supprime toutes les permissions d'un utilisateur pour un site donné",
                "tags": [
                    "UserSiteRole"
                ]
            }
        },
        "/user_site_role/{id}": {
            "delete": {
                "parameters": [
                    {
                        "description": "ID de la relation à supprimer",
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Relation supprimée avec succès",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "remaining_permissions": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Relation non trouvée"
                    }
                },
                "summary": "Supprime une relation user-site-role",
                "tags": [
                    "UserSiteRole"
                ]
            },
            "get": {
                "parameters": [
                    {
                        "description": "ID de la relation",
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Relation trouvée",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserSiteRole"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Relation non trouvée"
                    }
                },
                "summary": "Récupère une relation user-site-role spécifique",
                "tags": [
                    "UserSiteRole"
                ]
            },
            "patch": {
                "parameters": [
                    {
                        "description": "ID de la relation à modifier",
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "$ref": "#/components/requestBodies/Body"
                },
                "responses": {
                    "200": {
                        "description": "Relation modifiée avec succès",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserSiteRole"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Données invalides"
                    },
                    "404": {
                        "description": "Relation non trouvée"
                    },
                    "409": {
                        "description": "La relation existe déjà"
                    }
                },
                "summary": "Modifie une relation user-site-role existante",
                "tags": [
                    "UserSiteRole"
                ]
            },
            "put": {
                "parameters": [
                    {
                        "description": "ID de la relation à modifier",
                        "in": "path",
                        "name": "id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "$ref": "#/components/requestBodies/Body"
                },
                "responses": {
                    "200": {
                        "description": "Relation modifiée avec succès",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserSiteRole"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Données invalides"
                    },
                    "404": {
                        "description": "Relation non trouvée"
                    },
                    "409": {
                        "description": "La relation existe déjà"
                    }
                },
                "summary": "Modifie une relation user-site-role existante",
                "tags": [
                    "UserSiteRole"
                ]
            }
        },
        "/users/": {
            "get": {
                "description": "Récupère la liste de tous les utilisateurs avec leurs sites et rôles associés.",
                "responses": {
                    "200": {
                        "description": "Liste des utilisateurs avec leurs sites et rôles.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "login": {
                                                "example": "user1",
                                                "type": "string"
                                            },
                                            "roles": {
                                                "example": [
                                                    "admin",
                                                    "user"
                                                ],
                                                "items": {
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            },
                                            "sites": {
                                                "example": [
                                                    {
                                                        "id": 3,
                                                        "name": "Site test 1"
                                                    },
                                                    {
                                                        "id": 4,
                                                        "name": "Site test 2"
                                                    }
                                                ],
                                                "items": {
                                                    "properties": {
                                                        "id": {
                                                            "example": 3,
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "example": "Site test 1",
                                                            "type": "string"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "type": "array"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User CRUD"
                ]
            },
            "post": {
                "description": "Crée un nouvel utilisateur et associe éventuellement des rôles et sites via l'association.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "login": {
                                        "example": "nouveluser",
                                        "type": "string"
                                    },
                                    "password": {
                                        "example": "motdepasse",
                                        "type": "string"
                                    },
                                    "roles": {
                                        "example": [
                                            "admin",
                                            "user"
                                        ],
                                        "items": {
                                            "type": "string"
                                        },
                                        "type": "array"
                                    },
                                    "sites": {
                                        "example": [
                                            3,
                                            4
                                        ],
                                        "items": {
                                            "type": "integer"
                                        },
                                        "type": "array"
                                    }
                                },
                                "required": [
                                    "login",
                                    "password"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Utilisateur créé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "login": {
                                            "example": "nouveluser",
                                            "type": "string"
                                        },
                                        "roles": {
                                            "example": [
                                                "admin",
                                                "user"
                                            ],
                                            "items": {
                                                "type": "string"
                                            },
                                            "type": "array"
                                        },
                                        "sites": {
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "example": 3,
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "example": "Site test 1",
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    }
                },
                "tags": [
                    "User CRUD"
                ]
            }
        },
        "/users/create-with-relations": {
            "post": {
                "description": "Crée un nouvel utilisateur avec toutes ses relations site-rôle en une seule requête.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "login": {
                                        "example": "nouveluser",
                                        "type": "string"
                                    },
                                    "password": {
                                        "example": "motdepasse",
                                        "type": "string"
                                    },
                                    "rolesBySite": {
                                        "description": "Objet où les clés sont les IDs des sites et les valeurs sont les IDs des rôles",
                                        "example": {
                                            "1": 2,
                                            "3": 1
                                        },
                                        "type": "object"
                                    }
                                },
                                "required": [
                                    "login",
                                    "password",
                                    "rolesBySite"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Utilisateur créé avec succès avec toutes ses relations.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "login": {
                                            "example": "nouveluser",
                                            "type": "string"
                                        },
                                        "relations": {
                                            "items": {
                                                "properties": {
                                                    "role_id": {
                                                        "example": 2,
                                                        "type": "integer"
                                                    },
                                                    "role_name": {
                                                        "example": "editor",
                                                        "type": "string"
                                                    },
                                                    "site_id": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "site_name": {
                                                        "example": "Site A",
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête ou utilisateur existant."
                    },
                    "404": {
                        "description": "Site ou rôle non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User CRUD"
                ]
            }
        },
        "/users/sites/{user_id}/sites": {
            "get": {
                "description": "Récupère la liste des sites associés à un utilisateur donné.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des sites pour l'utilisateur.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "example": 1,
                                                "type": "integer"
                                            },
                                            "name": {
                                                "example": "Site 1",
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User-Site Relations"
                ]
            },
            "post": {
                "description": "Associe un site à un utilisateur ou met à jour une association existante. Attendez un JSON contenant 'site_id'.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "site_id": {
                                        "example": 1,
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "site_id"
                                ],
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Site associé avec succès à l'utilisateur ou association mise à jour.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Site ajouté à l'utilisateur ou association mise à jour.",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur ou site non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User-Site Relations"
                ]
            }
        },
        "/users/sites/{user_id}/sites/{site_id}": {
            "delete": {
                "description": "Dissocie un site d'un utilisateur.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "description": "ID du site à dissocier",
                        "in": "path",
                        "name": "site_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Site dissocié avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Site dissocié de l'utilisateur.",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur ou site non trouvé, ou site non associé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User-Site Relations"
                ]
            }
        },
        "/users/{user_id}": {
            "delete": {
                "description": "Supprime un utilisateur par son ID.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur à supprimer",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Utilisateur supprimé avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "example": "Utilisateur supprimé avec succès",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User CRUD"
                ]
            },
            "get": {
                "description": "Récupère un utilisateur par son ID avec ses sites et rôles associés.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur à récupérer",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de l'utilisateur.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "login": {
                                            "example": "user1",
                                            "type": "string"
                                        },
                                        "roles": {
                                            "items": {
                                                "type": "string"
                                            },
                                            "type": "array"
                                        },
                                        "sites": {
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "example": 3,
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "example": "Site test 1",
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User CRUD"
                ]
            },
            "put": {
                "description": "Met à jour un utilisateur existant par son ID.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur à mettre à jour",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "login": {
                                        "example": "updateduser",
                                        "type": "string"
                                    },
                                    "password": {
                                        "example": "updatedpassword",
                                        "type": "string"
                                    },
                                    "roles": {
                                        "description": "Liste des noms de rôles à associer (optionnel)",
                                        "items": {
                                            "example": "admin",
                                            "type": "string"
                                        },
                                        "type": "array"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Utilisateur mis à jour avec succès.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "login": {
                                            "example": "updateduser",
                                            "type": "string"
                                        },
                                        "roles": {
                                            "items": {
                                                "type": "string"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User CRUD"
                ]
            }
        },
        "/users/{user_id}/update-with-relations": {
            "put": {
                "description": "Met à jour un utilisateur existant avec ses relations site-rôle en une seule requête.",
                "parameters": [
                    {
                        "description": "ID de l'utilisateur à mettre à jour",
                        "in": "path",
                        "name": "user_id",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "login": {
                                        "example": "utilisateurmodifie",
                                        "type": "string"
                                    },
                                    "password": {
                                        "example": "nouveaumotdepasse",
                                        "type": "string"
                                    },
                                    "replaceExistingRelations": {
                                        "description": "Si true, remplace toutes les relations existantes. Si false, ajoute ou met à jour les relations fournies.",
                                        "example": false,
                                        "type": "boolean"
                                    },
                                    "rolesBySite": {
                                        "description": "Objet où les clés sont les IDs des sites et les valeurs sont les IDs des rôles",
                                        "example": {
                                            "1": 2,
                                            "3": 1
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Utilisateur mis à jour avec succès avec ses relations.",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "example": 1,
                                            "type": "integer"
                                        },
                                        "login": {
                                            "example": "utilisateurmodifie",
                                            "type": "string"
                                        },
                                        "relations": {
                                            "items": {
                                                "properties": {
                                                    "role_id": {
                                                        "example": 2,
                                                        "type": "integer"
                                                    },
                                                    "role_name": {
                                                        "example": "editor",
                                                        "type": "string"
                                                    },
                                                    "site_id": {
                                                        "example": 1,
                                                        "type": "integer"
                                                    },
                                                    "site_name": {
                                                        "example": "Site A",
                                                        "type": "string"
                                                    },
                                                    "status": {
                                                        "example": "created",
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Mauvaise requête."
                    },
                    "404": {
                        "description": "Utilisateur, site ou rôle non trouvé."
                    },
                    "500": {
                        "description": "Erreur interne."
                    }
                },
                "tags": [
                    "User CRUD"
                ]
            }
        }
    },
    "tags": [
        {
            "description": "Authentification (login, logout)",
            "name": "Authentication"
        },
        {
            "description": "Gestion des utilisateurs",
            "name": "User CRUD"
        },
        {
            "description": "Gestion des sites",
            "name": "Site CRUD"
        },
        {
            "description": "Gestion des bâtiments",
            "name": "Batiment CRUD"
        },
        {
            "description": "Gestion des étages",
            "name": "Etage CRUD"
        },
        {
            "description": "Gestion des BAES (Blocs Autonomes d'Éclairage de Sécurité)",
            "name": "BAES CRUD"
        },
        {
            "description": "Gestion des statuts/erreurs des BAES",
            "name": "Status CRUD"
        },
        {
            "description": "Gestion des cartes (plans, coordonnées, zoom)",
            "name": "carte crud"
        },
        {
            "description": "Routes utilitaires et agrégées (ex: version API, données consolidées)",
            "name": "general"
        },
        {
            "description": "Paramètres de configuration",
            "name": "Configuration CRUD"
        }
    ],
    "components": {
        "requestBodies": {
            "Body": {
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "role_id": {
                                    "description": "ID du rôle",
                                    "type": "integer"
                                },
                                "site_id": {
                                    "description": "ID du site",
                                    "nullable": true,
                                    "type": "integer"
                                },
                                "user_id": {
                                    "description": "ID de l'utilisateur",
                                    "type": "integer"
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "required": true
            },
            "putEtagesCarteUpdateBySiteEtage_siteId_EtageId_": {
                "content": {
                    "multipart/form-data": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "file": {
                                    "description": "Nouveau fichier image de la carte (png, jpg, etc.)",
                                    "type": "string",
                                    "format": "binary"
                                },
                                "center_lat": {
                                    "description": "Nouvelle latitude du centre de la carte",
                                    "type": "number"
                                },
                                "center_lng": {
                                    "description": "Nouvelle longitude du centre de la carte",
                                    "type": "number"
                                },
                                "zoom": {
                                    "description": "Nouveau niveau de zoom de la carte",
                                    "type": "number"
                                }
                            }
                        }
                    }
                }
            },
            "Body2": {
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "name": {
                                    "example": "Site mis à jour",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "required": true
            }
        },
        "schemas": {
            "Baes": {
                "properties": {
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "etage_id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "label": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "position": {
                        "type": "object"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Batiment": {
                "properties": {
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "site_id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Carte": {
                "properties": {
                    "center_lat": {
                        "format": "float",
                        "type": "number"
                    },
                    "center_lng": {
                        "format": "float",
                        "type": "number"
                    },
                    "chemin": {
                        "type": "string"
                    },
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "etage_id": {
                        "format": "int64",
                        "nullable": true,
                        "type": "integer"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "site_id": {
                        "format": "int64",
                        "nullable": true,
                        "type": "integer"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "zoom": {
                        "format": "float",
                        "type": "number"
                    }
                },
                "type": "object"
            },
            "Etage": {
                "properties": {
                    "batiment_id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Role": {
                "properties": {
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Site": {
                "properties": {
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Status": {
                "properties": {
                    "acknowledged_at": {
                        "format": "date-time",
                        "nullable": true,
                        "type": "string"
                    },
                    "acknowledged_by_user_id": {
                        "nullable": true,
                        "type": "integer"
                    },
                    "baes_id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "erreur": {
                        "type": "integer"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "is_ignored": {
                        "type": "boolean"
                    },
                    "is_solved": {
                        "type": "boolean"
                    },
                    "timestamp": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "User": {
                "properties": {
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "login": {
                        "type": "string"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "UserSiteRole": {
                "properties": {
                    "created_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "role_id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "site_id": {
                        "format": "int64",
                        "type": "integer"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string"
                    },
                    "user_id": {
                        "format": "int64",
                        "type": "integer"
                    }
                },
                "type": "object"
            }
        }
    }
}